<div class="container">
  <div class="header">
    <div class="avatar-container">
      <svg class="avatar-icon" viewBox="0 0 24 24">
        <path d="M19 3h-4.18C14.4 1.84 13.3 1 12 1S9.6 1.84 9.18 3H5c-1.1 0-2 .9-2 
                 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM12 3c.55 0 1 
                 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm0 6c1.1 0 2 .9 2 
                 2v1h1c.55 0 1 .45 1 1s-.45 1-1 1h-1v1c0 .55-.45 1-1 
                 1s-1-.45-1-1v-1h-1c-.55 0-1-.45-1-1s.45-1 1-1h1v-1c0-1.1.9-2 2-2z"/>
      </svg>
    </div>

    <h2 class="title">Create Project</h2>
    <p class="subtitle">Launch a new project for your team</p>
  </div>

  <form [formGroup]="form" (ngSubmit)="onSubmit()" class="project-form">
    <div class="form-group" 
         [class.valid]="form.get('name')?.valid && form.get('name')?.touched" 
         [class.error]="form.get('name')?.invalid && form.get('name')?.touched">
      <label for="name">Project Name</label>
      <div class="input-wrapper">
        <input
          id="name"
          formControlName="name"
          type="text"
          placeholder="Ex: HR Portal"
        />
        <svg class="input-icon" viewBox="0 0 24 24">
          <path d="M9,12l2,2l4-4m6,2A9,9,0,1,1,12,3a9,9,0,0,1,9,9Z"/>
        </svg>
      </div>
      <div class="error-message" *ngIf="form.get('name')?.invalid && form.get('name')?.touched">
        <span *ngIf="form.get('name')?.errors?.['required']">Project name is required</span>
        <span *ngIf="form.get('name')?.errors?.['minlength']">Project name must be at least 3 characters</span>
        <span *ngIf="form.get('name')?.errors?.['maxlength']">Project name cannot exceed 50 characters</span>
      </div>
    </div>

    <div class="form-group" 
         [class.valid]="form.get('description')?.valid && form.get('description')?.touched" 
         [class.error]="form.get('description')?.invalid && form.get('description')?.touched">
      <label for="description">Description</label>
      <div class="textarea-wrapper">
        <textarea
          id="description"
          formControlName="description"
          rows="4"
          placeholder="Describe the objectives and scope of the project..."
        ></textarea>
        <svg class="textarea-icon" viewBox="0 0 24 24">
          <path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"/>
        </svg>
        <div class="character-count">
          {{ form.get('description')?.value?.length || 0 }}/500
        </div>
      </div>
      <div class="error-message" *ngIf="form.get('description')?.invalid && form.get('description')?.touched">
        <span *ngIf="form.get('description')?.errors?.['required']">Description is required</span>
        <span *ngIf="form.get('description')?.errors?.['minlength']">Description must be at least 10 characters</span>
        <span *ngIf="form.get('description')?.errors?.['maxlength']">Description cannot exceed 500 characters</span>
      </div>
    </div>

    <button 
      type="submit" 
      class="btn" 
      [disabled]="form.invalid || isLoading"
      [class.loading]="isLoading"
    >
      <span *ngIf="!isLoading">
        <svg class="btn-icon" viewBox="0 0 24 24">
          <path d="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z"/>
        </svg>
        Create Project
      </span>
      <span *ngIf="isLoading">
        <svg class="spinner" viewBox="0 0 24 24">
          <circle cx="12" cy="12" r="10" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-dasharray="32" stroke-dashoffset="32">
            <animate attributeName="stroke-dashoffset" dur="1s" values="32;0" repeatCount="indefinite"/>
          </circle>
        </svg>
        Creating...
      </span>
    </button>

    <div class="form-footer">
      <p class="help-text">
        <svg class="info-icon" viewBox="0 0 24 24">
          <path d="M13,9H11V7H13M13,17H11V11H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"/>
        </svg>
        All team members will be able to view this project
      </p>
    </div>
  </form>

  <!-- Success/Error Messages -->
  <div class="alert alert-success" *ngIf="successMessage">
    <svg class="alert-icon" viewBox="0 0 24 24">
      <path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"/>
    </svg>
    <div>
      <strong>Project created successfully!</strong>
      <p>{{ successMessage }}</p>
    </div>
    <button class="alert-close" (click)="dismissMessage()">
      <svg viewBox="0 0 24 24">
        <path d="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12Z"/>
      </svg>
    </button>
  </div>

  <div class="alert alert-error" *ngIf="errorMessage">
    <svg class="alert-icon" viewBox="0 0 24 24">
      <path d="M13,13H11V7H13M13,17H11V15H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"/>
    </svg>
    <div>
      <strong>Error creating project</strong>
      <p>{{ errorMessage }}</p>
    </div>
    <button class="alert-close" (click)="dismissMessage()">
      <svg viewBox="0 0 24 24">
        <path d="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12Z"/>
      </svg>
    </button>
  </div>
</div>
